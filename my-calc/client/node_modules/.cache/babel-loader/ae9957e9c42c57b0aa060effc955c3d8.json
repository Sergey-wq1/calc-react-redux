{"ast":null,"code":"import Fetch from '../scripts/dataFetch';\nimport deleteRequest from '../scripts/deleteHistory';\nimport OperationSign from '../scripts/PutAway';\nimport updateHistory from '../scripts/updateHistory';\nimport { AC, DELETEHISTORY, DEPLY, EVAL, MINUS, MULTIPLY, NUM, PERSENT, PLUS, PLUSMIN, POINT, SHOWRENEWHISTORY } from './actions/variables';\nconst initialState = {\n  disabledPoint: false,\n  updateNedeed: 0,\n  addHistory: [],\n  history: [],\n  counter: '0'\n};\n\nconst foundSign = string => {\n  for (let i = string.length; i > 0; i -= 1) {}\n};\n\nconst changeSign = state => {\n  const lengthCounter = state.counter.length;\n\n  if (state.counter[lengthCounter - 1] === '-') {\n    const historyCounter = state.counter.slice(0, lengthCounter - 1);\n    return { ...state,\n      addHistory: [],\n      disabledPoint: false,\n      counter: `${historyCounter}+`\n    };\n  }\n\n  if (state.counter[lengthCounter - 1] === '+') {\n    const historyCounter = state.counter.slice(0, lengthCounter - 1);\n    return { ...state,\n      addHistory: [],\n      disabledPoint: false,\n      counter: `${historyCounter}-`\n    };\n  }\n\n  if (state.counter) {\n    return { ...state,\n      addHistory: [],\n      disabledPoint: false,\n      counter: ''\n    };\n  }\n};\n\nconst numReducer = (state = initialState, action) => {\n  const operationSign = new OperationSign();\n\n  switch (action.type) {\n    case NUM:\n      {\n        if (state.counter === '0' && state.counter.length === 1) {\n          return { ...state,\n            addHistory: [],\n            counter: `${state.counter.slice(1, 2)}${action.number}`\n          };\n        }\n\n        return { ...state,\n          addHistory: [],\n          counter: `${state.counter}${action.number}`\n        };\n      }\n\n    case PLUS:\n      return { ...state,\n        addHistory: [],\n        disabledPoint: false,\n        counter: `${operationSign.putAway(state.counter)}+`\n      };\n\n    case AC:\n      return { ...state,\n        addHistory: [],\n        disabledPoint: false,\n        counter: '0'\n      };\n\n    case MULTIPLY:\n      return { ...state,\n        addHistory: [],\n        disabledPoint: false,\n        counter: `${operationSign.putAway(state.counter)}*`\n      };\n\n    case MINUS:\n      return { ...state,\n        addHistory: [],\n        disabledPoint: false,\n        counter: `${operationSign.putAway(state.counter)}-`\n      };\n\n    case DEPLY:\n      return { ...state,\n        addHistory: [],\n        disabledPoint: false,\n        counter: `${operationSign.putAway(state.counter)}/`\n      };\n\n    case POINT:\n      return { ...state,\n        disabledPoint: true,\n        addHistory: [],\n        counter: `${operationSign.pointEnd(state.counter)}.`\n      };\n\n    case PERSENT:\n      return { ...state,\n        addHistory: [],\n        counter: `${operationSign.putAway(state.counter)}%`\n      };\n\n    case PLUSMIN:\n      return changeSign(state);\n\n    case EVAL:\n      Fetch('/', 'POST', state.counter, operationSign.putFirst(operationSign.endValue(state.counter))); // eslint-disable-next-line no-case-declarations\n\n      const result = operationSign.putFirst(operationSign.endValue(state.counter));\n      return { ...state,\n        updateNedeed: state.updateNedeed + 1,\n        disabledPoint: false,\n        counter: result\n      };\n\n    case DELETEHISTORY:\n      console.log(action.expression, 1);\n      deleteRequest(action.expression, action.result);\n      return { ...state,\n        updateNedeed: state.updateNedeed + 1,\n        history: updateHistory(state.history)\n      };\n\n    case SHOWRENEWHISTORY:\n      return { ...state,\n        history: action.data\n      };\n\n    default:\n      return state;\n  }\n};\n\nexport default numReducer;","map":{"version":3,"sources":["D:/github/calc/calc-react-redux/my-calc/client/src/redux/numReducer.js"],"names":["Fetch","deleteRequest","OperationSign","updateHistory","AC","DELETEHISTORY","DEPLY","EVAL","MINUS","MULTIPLY","NUM","PERSENT","PLUS","PLUSMIN","POINT","SHOWRENEWHISTORY","initialState","disabledPoint","updateNedeed","addHistory","history","counter","foundSign","string","i","length","changeSign","state","lengthCounter","historyCounter","slice","numReducer","action","operationSign","type","number","putAway","pointEnd","putFirst","endValue","result","console","log","expression","data"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,sBAAlB;AACA,OAAOC,aAAP,MAA0B,0BAA1B;AACA,OAAOC,aAAP,MAA0B,oBAA1B;AACA,OAAOC,aAAP,MAA0B,0BAA1B;AACA,SACEC,EADF,EAEEC,aAFF,EAGEC,KAHF,EAIEC,IAJF,EAKEC,KALF,EAMEC,QANF,EAOEC,GAPF,EAQEC,OARF,EASEC,IATF,EAUEC,OAVF,EAWEC,KAXF,EAYEC,gBAZF,QAaO,qBAbP;AAeA,MAAMC,YAAY,GAAG;AACnBC,EAAAA,aAAa,EAAE,KADI;AAEnBC,EAAAA,YAAY,EAAE,CAFK;AAGnBC,EAAAA,UAAU,EAAE,EAHO;AAInBC,EAAAA,OAAO,EAAE,EAJU;AAKnBC,EAAAA,OAAO,EAAE;AALU,CAArB;;AAQA,MAAMC,SAAS,GAAIC,MAAD,IAAY;AAC5B,OAAK,IAAIC,CAAC,GAAGD,MAAM,CAACE,MAApB,EAA4BD,CAAC,GAAG,CAAhC,EAAmCA,CAAC,IAAI,CAAxC,EAA2C,CAE1C;AACF,CAJD;;AAMA,MAAME,UAAU,GAAIC,KAAD,IAAW;AAC5B,QAAMC,aAAa,GAAGD,KAAK,CAACN,OAAN,CAAcI,MAApC;;AACA,MAAIE,KAAK,CAACN,OAAN,CAAcO,aAAa,GAAG,CAA9B,MAAqC,GAAzC,EAA8C;AAC5C,UAAMC,cAAc,GAAGF,KAAK,CAACN,OAAN,CAAcS,KAAd,CAAoB,CAApB,EAAuBF,aAAa,GAAG,CAAvC,CAAvB;AACA,WAAO,EACL,GAAGD,KADE;AAELR,MAAAA,UAAU,EAAE,EAFP;AAGLF,MAAAA,aAAa,EAAE,KAHV;AAILI,MAAAA,OAAO,EAAG,GAAEQ,cAAe;AAJtB,KAAP;AAMD;;AAAC,MAAIF,KAAK,CAACN,OAAN,CAAcO,aAAa,GAAG,CAA9B,MAAqC,GAAzC,EAA8C;AAC9C,UAAMC,cAAc,GAAGF,KAAK,CAACN,OAAN,CAAcS,KAAd,CAAoB,CAApB,EAAuBF,aAAa,GAAG,CAAvC,CAAvB;AACA,WAAO,EACL,GAAGD,KADE;AAELR,MAAAA,UAAU,EAAE,EAFP;AAGLF,MAAAA,aAAa,EAAE,KAHV;AAILI,MAAAA,OAAO,EAAG,GAAEQ,cAAe;AAJtB,KAAP;AAMD;;AAAC,MAAIF,KAAK,CAACN,OAAV,EAAmB;AACnB,WAAO,EACL,GAAGM,KADE;AAELR,MAAAA,UAAU,EAAE,EAFP;AAGLF,MAAAA,aAAa,EAAE,KAHV;AAILI,MAAAA,OAAO,EAAE;AAJJ,KAAP;AAMD;AACF,CA1BD;;AA4BA,MAAMU,UAAU,GAAG,CAACJ,KAAK,GAAGX,YAAT,EAAuBgB,MAAvB,KAAkC;AACnD,QAAMC,aAAa,GAAG,IAAI/B,aAAJ,EAAtB;;AACA,UAAQ8B,MAAM,CAACE,IAAf;AACE,SAAKxB,GAAL;AAAU;AACR,YAAIiB,KAAK,CAACN,OAAN,KAAkB,GAAlB,IAAyBM,KAAK,CAACN,OAAN,CAAcI,MAAd,KAAyB,CAAtD,EAAyD;AACvD,iBAAO,EACL,GAAGE,KADE;AAELR,YAAAA,UAAU,EAAE,EAFP;AAGLE,YAAAA,OAAO,EAAG,GAAEM,KAAK,CAACN,OAAN,CAAcS,KAAd,CAAoB,CAApB,EAAuB,CAAvB,CAA0B,GAAEE,MAAM,CAACG,MAAO;AAHjD,WAAP;AAKD;;AACD,eAAO,EACL,GAAGR,KADE;AAELR,UAAAA,UAAU,EAAE,EAFP;AAGLE,UAAAA,OAAO,EAAG,GAAEM,KAAK,CAACN,OAAQ,GAAEW,MAAM,CAACG,MAAO;AAHrC,SAAP;AAKD;;AACD,SAAKvB,IAAL;AACE,aAAO,EACL,GAAGe,KADE;AAELR,QAAAA,UAAU,EAAE,EAFP;AAGLF,QAAAA,aAAa,EAAE,KAHV;AAILI,QAAAA,OAAO,EAAG,GAAEY,aAAa,CAACG,OAAd,CAAsBT,KAAK,CAACN,OAA5B,CAAqC;AAJ5C,OAAP;;AAMF,SAAKjB,EAAL;AACE,aAAO,EACL,GAAGuB,KADE;AAELR,QAAAA,UAAU,EAAE,EAFP;AAGLF,QAAAA,aAAa,EAAE,KAHV;AAILI,QAAAA,OAAO,EAAE;AAJJ,OAAP;;AAMF,SAAKZ,QAAL;AACE,aAAO,EACL,GAAGkB,KADE;AAELR,QAAAA,UAAU,EAAE,EAFP;AAGLF,QAAAA,aAAa,EAAE,KAHV;AAILI,QAAAA,OAAO,EAAG,GAAEY,aAAa,CAACG,OAAd,CAAsBT,KAAK,CAACN,OAA5B,CAAqC;AAJ5C,OAAP;;AAMF,SAAKb,KAAL;AACE,aAAO,EACL,GAAGmB,KADE;AAELR,QAAAA,UAAU,EAAE,EAFP;AAGLF,QAAAA,aAAa,EAAE,KAHV;AAILI,QAAAA,OAAO,EAAG,GAAEY,aAAa,CAACG,OAAd,CAAsBT,KAAK,CAACN,OAA5B,CAAqC;AAJ5C,OAAP;;AAMF,SAAKf,KAAL;AACE,aAAO,EACL,GAAGqB,KADE;AAELR,QAAAA,UAAU,EAAE,EAFP;AAGLF,QAAAA,aAAa,EAAE,KAHV;AAILI,QAAAA,OAAO,EAAG,GAAEY,aAAa,CAACG,OAAd,CAAsBT,KAAK,CAACN,OAA5B,CAAqC;AAJ5C,OAAP;;AAMF,SAAKP,KAAL;AACE,aAAO,EACL,GAAGa,KADE;AAELV,QAAAA,aAAa,EAAE,IAFV;AAGLE,QAAAA,UAAU,EAAE,EAHP;AAILE,QAAAA,OAAO,EAAG,GAAEY,aAAa,CAACI,QAAd,CAAuBV,KAAK,CAACN,OAA7B,CAAsC;AAJ7C,OAAP;;AAMF,SAAKV,OAAL;AACE,aAAO,EACL,GAAGgB,KADE;AAELR,QAAAA,UAAU,EAAE,EAFP;AAGLE,QAAAA,OAAO,EAAG,GAAEY,aAAa,CAACG,OAAd,CAAsBT,KAAK,CAACN,OAA5B,CAAqC;AAH5C,OAAP;;AAKF,SAAKR,OAAL;AACE,aAAOa,UAAU,CAACC,KAAD,CAAjB;;AACF,SAAKpB,IAAL;AACEP,MAAAA,KAAK,CAAC,GAAD,EAAM,MAAN,EAAc2B,KAAK,CAACN,OAApB,EAA6BY,aAAa,CAACK,QAAd,CAAuBL,aAAa,CAACM,QAAd,CAAuBZ,KAAK,CAACN,OAA7B,CAAvB,CAA7B,CAAL,CADF,CAEE;;AACA,YAAMmB,MAAM,GAAGP,aAAa,CAACK,QAAd,CAAuBL,aAAa,CAACM,QAAd,CAAuBZ,KAAK,CAACN,OAA7B,CAAvB,CAAf;AACA,aAAO,EACL,GAAGM,KADE;AAELT,QAAAA,YAAY,EAAES,KAAK,CAACT,YAAN,GAAqB,CAF9B;AAGLD,QAAAA,aAAa,EAAE,KAHV;AAILI,QAAAA,OAAO,EAAEmB;AAJJ,OAAP;;AAMF,SAAKnC,aAAL;AACEoC,MAAAA,OAAO,CAACC,GAAR,CAAYV,MAAM,CAACW,UAAnB,EAA+B,CAA/B;AACA1C,MAAAA,aAAa,CAAC+B,MAAM,CAACW,UAAR,EAAoBX,MAAM,CAACQ,MAA3B,CAAb;AACA,aAAO,EACL,GAAGb,KADE;AAELT,QAAAA,YAAY,EAAES,KAAK,CAACT,YAAN,GAAqB,CAF9B;AAGLE,QAAAA,OAAO,EAAEjB,aAAa,CAACwB,KAAK,CAACP,OAAP;AAHjB,OAAP;;AAKF,SAAKL,gBAAL;AACE,aAAO,EACL,GAAGY,KADE;AAELP,QAAAA,OAAO,EAAEY,MAAM,CAACY;AAFX,OAAP;;AAIF;AACE,aAAOjB,KAAP;AAzFJ;AA2FD,CA7FD;;AA+FA,eAAeI,UAAf","sourcesContent":["import Fetch from '../scripts/dataFetch'\nimport deleteRequest from '../scripts/deleteHistory'\nimport OperationSign from '../scripts/PutAway'\nimport updateHistory from '../scripts/updateHistory'\nimport {\n  AC,\n  DELETEHISTORY,\n  DEPLY,\n  EVAL,\n  MINUS,\n  MULTIPLY,\n  NUM,\n  PERSENT,\n  PLUS,\n  PLUSMIN,\n  POINT,\n  SHOWRENEWHISTORY,\n} from './actions/variables'\n\nconst initialState = {\n  disabledPoint: false,\n  updateNedeed: 0,\n  addHistory: [],\n  history: [],\n  counter: '0',\n}\n\nconst foundSign = (string) => {\n  for (let i = string.length; i > 0; i -= 1) {\n\n  }\n}\n\nconst changeSign = (state) => {\n  const lengthCounter = state.counter.length\n  if (state.counter[lengthCounter - 1] === '-') {\n    const historyCounter = state.counter.slice(0, lengthCounter - 1)\n    return {\n      ...state,\n      addHistory: [],\n      disabledPoint: false,\n      counter: `${historyCounter}+`,\n    }\n  } if (state.counter[lengthCounter - 1] === '+') {\n    const historyCounter = state.counter.slice(0, lengthCounter - 1)\n    return {\n      ...state,\n      addHistory: [],\n      disabledPoint: false,\n      counter: `${historyCounter}-`,\n    }\n  } if (state.counter) {\n    return {\n      ...state,\n      addHistory: [],\n      disabledPoint: false,\n      counter: '',\n    }\n  }\n}\n\nconst numReducer = (state = initialState, action) => {\n  const operationSign = new OperationSign()\n  switch (action.type) {\n    case NUM: {\n      if (state.counter === '0' && state.counter.length === 1) {\n        return {\n          ...state,\n          addHistory: [],\n          counter: `${state.counter.slice(1, 2)}${action.number}`,\n        }\n      }\n      return {\n        ...state,\n        addHistory: [],\n        counter: `${state.counter}${action.number}`,\n      }\n    }\n    case PLUS:\n      return {\n        ...state,\n        addHistory: [],\n        disabledPoint: false,\n        counter: `${operationSign.putAway(state.counter)}+`,\n      }\n    case AC:\n      return {\n        ...state,\n        addHistory: [],\n        disabledPoint: false,\n        counter: '0',\n      }\n    case MULTIPLY:\n      return {\n        ...state,\n        addHistory: [],\n        disabledPoint: false,\n        counter: `${operationSign.putAway(state.counter)}*`,\n      }\n    case MINUS:\n      return {\n        ...state,\n        addHistory: [],\n        disabledPoint: false,\n        counter: `${operationSign.putAway(state.counter)}-`,\n      }\n    case DEPLY:\n      return {\n        ...state,\n        addHistory: [],\n        disabledPoint: false,\n        counter: `${operationSign.putAway(state.counter)}/`,\n      }\n    case POINT:\n      return {\n        ...state,\n        disabledPoint: true,\n        addHistory: [],\n        counter: `${operationSign.pointEnd(state.counter)}.`,\n      }\n    case PERSENT:\n      return {\n        ...state,\n        addHistory: [],\n        counter: `${operationSign.putAway(state.counter)}%`,\n      }\n    case PLUSMIN:\n      return changeSign(state)\n    case EVAL:\n      Fetch('/', 'POST', state.counter, operationSign.putFirst(operationSign.endValue(state.counter)))\n      // eslint-disable-next-line no-case-declarations\n      const result = operationSign.putFirst(operationSign.endValue(state.counter))\n      return {\n        ...state,\n        updateNedeed: state.updateNedeed + 1,\n        disabledPoint: false,\n        counter: result,\n      }\n    case DELETEHISTORY:\n      console.log(action.expression, 1)\n      deleteRequest(action.expression, action.result)\n      return {\n        ...state,\n        updateNedeed: state.updateNedeed + 1,\n        history: updateHistory(state.history),\n      }\n    case SHOWRENEWHISTORY:\n      return {\n        ...state,\n        history: action.data,\n      }\n    default:\n      return state\n  }\n}\n\nexport default numReducer\n"]},"metadata":{},"sourceType":"module"}